# fsx-static-pv.yaml (请再次核对您的文件内容)
apiVersion: v1
kind: PersistentVolume
metadata:
  name: model-pv
spec:
  capacity:
    storage: 1200Gi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteMany
  persistentVolumeReclaimPolicy: Retain
  csi:
    driver: fsx.csi.aws.com
    volumeHandle: fs-058a0dc7a890c07d5  # ✅ 新的 FSx ID
    volumeAttributes:
      mountname: "fsx" 
      dnsname: "fs-058a0dc7a890c07d5.fsx.ap-northeast-1.amazonaws.com"
      region: "ap-northeast-1" 
  nodeAffinity: # <-- 必须存在这一段！
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: topology.fsx.csi.aws.com/zone
          operator: In
          # ✅ 匹配 GPU 节点所在的 AZ
          values:
          - ap-northeast-1d 
---
# PVC 定义 (保持不变)
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: model-pvc
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: ""
  volumeName: model-pv
  resources:
    requests:
      storage: 1200Gi
